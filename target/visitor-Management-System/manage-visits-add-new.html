
<!-- Begin Page Content -->
<div class="container-fluid mt-3">

<!-- Page Heading -->
<div class="row mb-2">
<div class="col-sm-12">
<h1 class="h4 text-gray-800">Add New Visits</h1>
</div>
</div>
<!-- End Page Heading -->



<div class="bg-white p-3 mb-3">
<div class="row">
<form name="addForm">
<div class="col-lg-12">

<div class="row">
<div class="col-lg-3">
<div class="form-group">
<label>Salutation</label>
<select ng-model="newVisit.meetingBooked.visitor.salutation" class="form-control" required>
<option>Mr.</option>
<option>Mrs.</option>
<option>Smt.</option>
</select>
</div>
</div>

<div class="col-lg-3">
<div class="form-group">
<label>First Name<span class="text-danger">*</span></label>
<input ng-model="newVisit.meetingBooked.visitor.firstName" class="form-control" required />
</div>
</div>

<div class="col-lg-3">
<div class="form-group">
<label>Middle Name<span class="text-danger">*</span></label>
<input ng-model="newVisit.meetingBooked.visitor.middleName" class="form-control" />
</div>
</div>
<div class="col-lg-3">
<div class="form-group">
<label>Last Name<span class="text-danger">*</span></label>
<input ng-model="newVisit.meetingBooked.visitor.lastName" class="form-control" required/>
</div>
</div>

</div>
</div>
<div class="col-lg-12">
<div class="row">
<!-- <div class="col-lg-4">
<div class="form-group">
<label>Name<span class="text-danger">*</span></label>
<input type="text" ng-model="newVisit.meetingBooked.visitor.visitorName" class="form-control" required/>
</div>
</div> -->


<div class="col-lg-4">
<div class="form-group">
<label>Designation<span class="text-danger">*</span></label>
<input ng-model="newVisit.meetingBooked.visitor.designation" class="form-control" required />
</div>
</div>

<div class="col-lg-4">
<div class="form-group">
<label>Gender</label>
<select ng-model="newVisit.meetingBooked.visitor.gender" class="form-control" required">
<option>Male</option>
<option>Female</option>
</select>
</div>
</div>

<div class="col-lg-4">
<div class="form-group">
<label>Email Id<span class="text-danger">*</span></label>
<input type="email" ng-model="newVisit.meetingBooked.visitor.emailId" class="form-control" required/>
</div>
</div>
</div>
</div>

<div class="col-lg-12">
<div class="row">

<div class="col-lg-4">
<div class="form-group">
<label>Phone No.<span class="text-danger">*</span></label>
<input type="text" minlength="10" maxlength="10" ng-model="newVisit.meetingBooked.visitor.contactNumber" class="form-control" required/>
<span ng-show="invalidMobile" style="color: red;">Please enter valid mobile Number</span>
</div>
</div>

<div class="col-lg-4">
<div class="form-group">
<label>Organization Name<span class="text-danger">*</span></label>
<textarea type="text" ng-model="newVisit.meetingBooked.visitor.organisation" class="form-control" rows="1" required></textarea>
</div>
</div>

<div class="col-lg-4">
<div class="form-group">
<label>Meeting type<span class="text-danger">*</span></label>
<select ng-model="newVisit.meetingBooked.meetingType" class="form-control" required>
<option ng-repeat="meetingType in allMeetingType">{{meetingType.meetingType}}</option>
</select>
</div>
</div>
</div>
</div>

<div class="col-lg-12">
<div class="row">
<!-- <div class="col-lg-4">
<div class="form-group">
<label>Visit Time<span class="text-danger">*</span></label>
<div class="FaIcon">
<i class="fa fa-clock FloatIcon"></i>
<input ng-model="newVisit.meetingBooked.visitTime" type="text" class="form-control" required>
</div>
</div>
</div> -->

<div class="col-lg-4">
<div class="form-group">
<label>Visit Date<span class="text-danger">*</span></label>
<div class="FaIcon">
<i class="fa fa-calendar-alt FloatIcon"></i>
<input id="datepicker" type="text" class="form-control" placeholder="select date" required>
<span ng-show="invalidDate" style="color: red;">Please enter valid date</span>
</div>
</div>
</div>

<div class="col-lg-4">
<div class="form-group clockpicker" data-placement="left" data-align="top" data-autoclose="true">
<label>Visit Time<span class="text-danger">*</span></label>
<div class="FaIcon">
<i class="fa fa-clock FloatIcon"></i>
<input type="text" class="form-control" placeholder="select Time" required>
<span ng-show="invalidTime" style="color: red;">Please enter valid Time</span>
</div>
</div>
</div>

<div class="col-lg-4">
<div class="form-group">
<label>Location<span class="text-danger">*</span></label>
<select id="plantCode" ng-model="newVisit.meetingBooked.visitLocation" ng-options="plant.plantName for plant in allPlants track by plant.plantCode" class="form-control" name="plantCode" required>
</select>
</div>
</div>



</div>
</div>

<div class="col-lg-12>
<div class="row">
<div class="col-lg-12 align-self-center">
<button type="submit" class="btn btn-primary mr-3" ng-click="addNewVisit()">Set Visit</button>
<button type="button" class="btn btn-secondary mr-3" data-dismiss="modal" ng-click="backToVisit()">Cancel</button>
<!-- <button type="button" class="btn btn-warning mr-3">Future Ref.</button> -->
</div>
</div>
</form>
</div>
<div class="row" ng-if="enableAddVisitor">

<button  type="button" class="btn btn-primary mr-3" data-toggle="modal" data-target="#addCoVisitorModal" ng-click="newVisitor = {};" style="margin-top: 2%;margin-left: 2%;margin-bottom: 2%">Add Co-visitor</button>

<div ng-if="allCoVisitor.length > 0" style="margin-right: 43%; margin-left: 2%;" class="table-responsive">
<table class="table table-bordered">
<thead>
<tr>
<th>Visitor Name</th>
<th>Phone No.</th>
<th>Email</th>
</tr>
</thead>

<tbody>
<tr ng-repeat="coVisitor in allCoVisitor">
<td>{{coVisitor.coVisitorName}}</td>
<td>{{coVisitor.coVisitorContact}}</td>
<td>{{coVisitor.coVisitorEmail}}</td>
</tr>

</tbody>
</table>
</div>

<button  type="button" class="btn btn-primary mr-3" ng-click="backToVisit()" style="margin-top: 2%;margin-left: 2%;margin-bottom: 2%">Back</button>

</div>
</div>

</div>

<script type="text/javascript">
$('.clockpicker').clockpicker()
	.find('input').change(function(){
		console.log(this.value);
	});
var input = $('#single-input').clockpicker({
	placement: 'bottom',
	align: 'left',
	autoclose: true,
	'default': 'now'
});

$('.clockpicker-with-callbacks').clockpicker({
		donetext: 'Done',
		init: function() { 
			console.log("colorpicker initiated");
		},
		beforeShow: function() {
			console.log("before show");
		},
		afterShow: function() {
			console.log("after show");
		},
		beforeHide: function() {
			console.log("before hide");
		},
		afterHide: function() {
			console.log("after hide");
		},
		beforeHourSelect: function() {
			console.log("before hour selected");
		},
		afterHourSelect: function() {
			console.log("after hour selected");
		},
		beforeDone: function() {
			console.log("before done");
		},
		afterDone: function() {
			console.log("after done");
		}
	})
	.find('input').change(function(){
		console.log(this.value);
	});

// Manually toggle to the minutes view
$('#check-minutes').click(function(e){
	// Have to stop propagation here
	e.stopPropagation();
	input.clockpicker('show')
			.clockpicker('toggleView', 'minutes');
});
if (/mobile/i.test(navigator.userAgent)) {
	$('input').prop('readOnly', true);
}
</script>

<script>
  $( function() {
    $( "#datepicker" ).datepicker();
  } );
  </script>


<!-- notification modal -->
<div class="modal fade" id="notificationModal" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
	        <div class="modal-header">
	          <h5 class="modal-title BlackTxtColor" id="exampleModalLabel">Notification</h5>
	          <button type="button" class="close" ng-click="notiClose()" data-dismiss="modal" aria-label="Close"></button>
	          <span aria-hidden="true">&times;</span>
	        </div>
	        <div class="modal-body">
	          <p>Visit Added Successfully.</p>
	          <p ng-if="addContactMsg">Do you want to add this visitor to your contact?</p>
	        </div>
	        <div class="modal-footer">
	        	<button ng-if="addContactMsg" type="button" class="btn btn-primary" ng-click="addNewContact()" >Yes</button>
	          <button type="button" class="btn btn-default" ng-click="notiClose()" data-dismiss="modal">Close</button>
	        </div>
      </div>
 	</div>
 </div>
<!-- notification modal -->

<!-- notification modal -->
<div class="modal fade" id="notificationModalForContact" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
	        <div class="modal-header">
	          <h5 class="modal-title BlackTxtColor" id="exampleModalLabel">Notification</h5>
	          <button type="button" class="close" ng-click="notiClose()" data-dismiss="modal" aria-label="Close"></button>
	          <span aria-hidden="true">&times;</span>
	        </div>
	        <div class="modal-body">
	          <p>Contact Added Successfully.</p>
	        </div>
	        <div class="modal-footer">
	          <button type="button" class="btn btn-default" ng-click="notiClose()" data-dismiss="modal">Close</button>
	        </div>
      </div>
 	</div>
 </div>
<!-- notification modal -->

<!-- add co visitor -->
<div class="modal fade" id="addCoVisitorModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog modal-md" role="document">
<div class="modal-content">
<form name="addCoVisitorForm">
<div class="modal-header">
<h5 class="modal-title BlackTxtColor" id="exampleModalLabel">Add Co-Visitor</h5>
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">&times;</span>
</button>
</div>
<div class="modal-body">


<!-- <div class="row">
<div class="col-lg-6 border-right"> -->
<div class="row">

<div class="col-lg-12">
<div class="form-group">
<label>Co-Visitor Name</label>
<input type="text" ng-model="newVisitor.coVisitorName" class="form-control" required />
</div>
</div>

<div class="col-lg-12">
<div class="form-group">
<label>Phone No.</label>
<input type="text" maxlength="10" minlength="10" ng-model="newVisitor.coVisitorContact" class="form-control" required />
<span ng-show="invalidMobile" style="color: red;">Please enter valid mobile Number</span>
</div>
</div>

<div class="col-lg-12">
<div class="form-group">
<label>Email</label>
<input type="email" ng-model="newVisitor.coVisitorEmail" class="form-control" required />
</div>
</div>

</div>
</div>
<div class="modal-footer">
	<button type="submit" class="btn btn-primary" ng-click="addCoVistor()">Submit</button>
	<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
</div>
</form>
</div>
</div>
</div>
<!-- add co visitor ends -->

<div class="modal fade" id="Loader" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog modal-md" role="document">
<div class="modal-content" style="display: contents;">

	<img src="images/Spinner.gif" style="margin: 51%;" height="22%"/>

</div>
</div>
</div>

</div>
<!-- /End Page Content -->

