<!-- Begin Page Content -->
<div ng-controller="manageVisitController" class="container-fluid mt-3">

<!-- Page Heading -->
<div class="row mb-2">
<div class="col-sm-8 align-self-center">
<h1 class="h4 text-gray-800">Todays Visits Listing</h1>
</div>

<div class="col-sm-4 text-right">
<a href="#!addVisit" class="btn btn-primary" ng-click="newvisit = {};">Add New Visits</a>
</div>
</div>
<!-- End Page Heading -->



<div class="bg-white p-3 mb-3">
<div class="table-responsive my-3 px-3">
<table class="table table" id="dataTable" width="100%" cellspacing="0">
<thead>
<tr>
<th>Sr.No.</th>
<th>Visitor Name</th>
<th>Visitor Phone</th>
<th>Total Co-Visitor</th>
<th>Checkin Gate</th>
<th>Check-In</th>
<th>Cancel</th>
<th>Check-Out</th>
</tr>
</thead>
<tbody>
<tr ng-repeat="visits in allVisits">
<td>{{$index + 1}}</td>
<td>{{visits.meetingBooked.visitor.visitorName}}</td>
<td>{{visits.meetingBooked.visitor.contactNumber}}</td>
<td>{{visits.meetingBooked.visitor.numberOfCoVisitor}}</td>
<td>{{visits.secCheckinTime}}</td>
<td><button class="btn btn-success btn-sm" ng-click="empCheckIn(visits)" ng-disabled="visits.empCheckin || !visits.secCheckin">Check In</button></td>
<td><button class="btn btn-danger btn-sm" data-toggle="modal" data-target="#cancelVisitModal" ng-disabled="visits.empCheckin  || visits.secCheckin" ng-click="cancelSelectedEmp(visits)">Cancel</button></td>
<td><button class="btn btn-primary btn-sm" data-toggle="modal" data-target="#CheckOutModal" ng-click="checkoutSelectedEmp(visits)" ng-disabled="!visits.empCheckin || visits.empCheckout">Check Out</button></td>
</tr>

</tbody>
</table>
</div>
</div>

<!--CheckOut-->
<div class="modal fade" id="CheckOutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title BlackTxtColor" id="exampleModalLabel">Check Out</h5>
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">&times;</span>
</button>
</div>
<div class="modal-body">
<div class="row">
<div class="col-lg-12">
<div class="form-group">
<label>Remarks if any</label>
<textarea ng-model="selectedVisit.meetingBooked.remarks" class="form-control" rows="3"></textarea>
</div>
</div>
</div>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="empCheckOut()">Check Out</button>
<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
</div>
</div>
</div>
</div>
<!--//CheckOut-->

<!-- cancel popup -->
<div class="modal fade" id="cancelVisitModal" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
	        <div class="modal-header">
	          <h5 class="modal-title BlackTxtColor" id="exampleModalLabel">Cancel Visit</h5>
	          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	          <span aria-hidden="true">&times;</span>
	        </div>
	        <div class="modal-body">
	          <p>Are you sure, you want to cancel the visit?</p>
	        </div>
	        <div class="modal-footer">
	        	<button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="cancelVisit()">Cancel</button>
	          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	        </div>
      </div>
 	</div>
 </div>
<!-- cancel popup ends -->

</div>
<!-- /End Page Content -->
